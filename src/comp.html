<template class="wth" id="wth-template">
    <style>
        @host {
            * {
                border: none;
            }
        }
        div {
            border: 1px solid #333;
            padding: 4px;
            float: left;
        }
        .hell.active {
            color: red;
        }
    </style>

    <div class="what">What</div>
    <div class="hell">Hell</div>

</template>

<script>

    var doc = document.currentScript.ownerDocument;

    var wthProto = Object.create(HTMLElement.prototype);
    var tpl = doc.getElementById('wth-template');

    wthProto.createdCallback = function () {
        var host = this.webkitCreateShadowRoot();
        var clone = tpl.content.cloneNode(true);
    
        host.appendChild(clone);

        var hell = host.querySelector('.hell');
        host.querySelector('.what').onclick = function () {
            if (/active/.test(hell.className)) {
                hell.className = hell.className.replace(' active', '');
            } else {
                hell.className += ' active';
            }
        };
    };

    document.register('x-wth', {prototype: wthProto});

</script>
